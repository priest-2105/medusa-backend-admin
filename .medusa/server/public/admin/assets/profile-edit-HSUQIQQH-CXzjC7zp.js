import{K as E}from"./chunk-6HTZNHPT-BCPhpqSm.js";import{b as i,u as F}from"./chunk-4TC5YS65-CPuKu5Wh.js";import{e_ as L,b as f,j as e,H as N,at as I,au as P,an as S,cy as j,e$ as w,t as g,x as s,I as u,am as d,B as p,ap as x}from"./index-CDL15WIi.js";var H=S({first_name:x().optional(),last_name:x().optional(),language:x()}),M=({user:t})=>{const{t:n,i18n:c}=f(),{handleSuccess:m}=F(),r=I({defaultValues:{first_name:t.first_name??"",last_name:t.last_name??"",language:c.language},resolver:P(H)}),y=async a=>{await c.changeLanguage(a)},_=j.sort((a,l)=>a.display_name.localeCompare(l.display_name)),{mutateAsync:b,isPending:v}=w(t.id),C=r.handleSubmit(async a=>{await b({first_name:a.first_name,last_name:a.last_name},{onError:l=>{g.error(l.message)}}),await y(a.language),g.success(n("profile.toast.edit")),m()});return e.jsx(i.Form,{form:r,children:e.jsxs(E,{onSubmit:C,className:"flex flex-1 flex-col",children:[e.jsx(i.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(s.Field,{control:r.control,name:"first_name",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.firstName")}),e.jsx(s.Control,{children:e.jsx(u,{...a})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:r.control,name:"last_name",render:({field:a})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.lastName")}),e.jsx(s.Control,{children:e.jsx(u,{...a})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsx(s.Field,{control:r.control,name:"language",render:({field:{ref:a,...l}})=>{var h;return e.jsxs(s.Item,{className:"gap-y-4",children:[e.jsxs("div",{children:[e.jsx(s.Label,{children:n("profile.fields.languageLabel")}),e.jsx(s.Hint,{children:n("profile.edit.languageHint")})]}),e.jsxs("div",{children:[e.jsx(s.Control,{children:e.jsxs(d,{...l,onValueChange:l.onChange,children:[e.jsx(d.Trigger,{ref:a,className:"py-1 text-[13px]",children:e.jsx(d.Value,{placeholder:n("profile.edit.languagePlaceholder"),children:(h=_.find(o=>o.code===l.value))==null?void 0:h.display_name})}),e.jsx(d.Content,{children:j.map(o=>e.jsx(d.Item,{value:o.code,children:o.display_name},o.code))})]})}),e.jsx(s.ErrorMessage,{})]})]})}})]})}),e.jsx(i.Footer,{children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(i.Close,{asChild:!0,children:e.jsx(p,{size:"small",variant:"secondary",children:n("actions.cancel")})}),e.jsx(p,{size:"small",type:"submit",isLoading:v,children:n("actions.save")})]})})]})})},R=()=>{const{user:t,isPending:n,isError:c,error:m}=L(),{t:r}=f();if(c)throw m;return e.jsxs(i,{children:[e.jsx(i.Header,{className:"capitalize",children:e.jsx(i.Title,{asChild:!0,children:e.jsx(N,{children:r("profile.edit.header")})})}),!n&&t&&e.jsx(M,{user:t})]})};export{R as Component};
