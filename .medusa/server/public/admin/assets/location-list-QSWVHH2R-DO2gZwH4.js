import{B as L}from"./chunk-BKJC5BGQ-ByShOdeX.js";import{L as v}from"./chunk-6WKBBTKM-CYPriKen.js";import{S as u,a as k}from"./chunk-LBIOZZPA-BCrCvB2l.js";import{d as N,dQ as w,a as S,j as s,dO as _,q as m,b as o,C as f,H as g,Y as l,B as T,L as C,g as B,fi as z,ag as q,A as D,P as K,T as P,fj as A,s as E,fk as O,t as h,a9 as F}from"./index-CDL15WIi.js";import{a as Q}from"./chunk-B6ZOPCPA-CHyIeUPr.js";import{T as d}from"./chunk-2RQLKDBF-Bw3UA82O.js";import"./chunk-EQTBJSBZ-CsNhXpG1.js";import"./Trans-DqsZfa_f.js";var y="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",I=()=>({queryKey:_.lists(),queryFn:async()=>await E.admin.stockLocation.list({fields:y}).catch(e=>{throw e.status===401?O("/login"):e})}),es=async e=>{const t=I();return m.getQueryData(t.queryKey)??await m.fetchQuery(t)};function H(e){const{t}=o(),{salesChannels:i}=e;return s.jsx("div",{className:"flex flex-col px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(l,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:t("stockLocations.salesChannels.label")}),s.jsx("div",{className:"flex-1 text-left",children:i!=null&&i.length?s.jsx(L,{rounded:!0,inline:!0,n:3,list:i.map(n=>n.name)}):"-"})]})})}function j(e){const{t}=o(),{fulfillmentSet:i,type:n}=e,a=!!i;return s.jsx("div",{className:"flex flex-col px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(l,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:t(`stockLocations.fulfillmentSets.${n}.header`)}),s.jsx("div",{className:"flex-1 text-left",children:s.jsx(F,{color:a?"green":"grey",children:t(a?"statuses.enabled":"statuses.disabled")})})]})})}function $(e){var x,p;const{location:t}=e,{t:i}=o(),n=B(),{mutateAsync:a}=z(t.id),c=async()=>{await n({title:i("general.areYouSure"),description:i("stockLocations.delete.confirmation",{name:t.name}),confirmText:i("actions.remove"),cancelText:i("actions.cancel")})&&await a(void 0,{onSuccess:()=>{h.success(i("shippingProfile.delete.successToast",{name:t.name}))},onError:b=>{h.error(b.message)}})};return s.jsxs(f,{className:"flex flex-col divide-y p-0",children:[s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-4",children:[s.jsx("div",{className:"shadow-borders-base flex size-7 items-center justify-center rounded-md",children:s.jsx("div",{className:"bg-ui-bg-field flex size-6 items-center justify-center rounded-[4px]",children:s.jsx(q,{className:"text-ui-fg-subtle"})})}),s.jsxs("div",{className:"grow-1 flex flex-1 flex-col",children:[s.jsx(l,{weight:"plus",children:t.name}),s.jsx(l,{className:"text-ui-fg-subtle txt-small",children:Q({address:t.address}).join(", ")})]}),s.jsxs("div",{className:"flex grow-0 items-center gap-4",children:[s.jsx(D,{groups:[{actions:[{label:i("actions.edit"),icon:s.jsx(K,{}),to:`/settings/locations/${t.id}/edit`}]},{actions:[{label:i("actions.delete"),icon:s.jsx(P,{}),onClick:c}]}]}),s.jsx("div",{className:"bg-ui-border-strong h-[12px] w-[1px]"}),s.jsx(v,{to:`/settings/locations/${t.id}`,children:i("actions.viewDetails")})]})]})}),s.jsx(H,{salesChannels:t.sales_channels}),s.jsx(j,{type:"pickup",fulfillmentSet:(x=t.fulfillment_sets)==null?void 0:x.find(r=>r.type==="pickup")}),s.jsx(j,{type:"shipping",fulfillmentSet:(p=t.fulfillment_sets)==null?void 0:p.find(r=>r.type==="shipping")})]})}var M=$,Y=()=>{const{t:e}=o();return s.jsxs(f,{className:"flex h-fit items-center justify-between gap-x-4 px-6 py-4",children:[s.jsxs("div",{children:[s.jsx(g,{children:e("stockLocations.domain")}),s.jsx(l,{className:"text-ui-fg-subtle txt-small",children:e("stockLocations.list.description")})]}),s.jsx(T,{size:"small",className:"shrink-0",variant:"secondary",asChild:!0,children:s.jsx(C,{to:"create",children:e("actions.create")})})]})};function ts(){const e=N(),{stock_locations:t=[],isError:i,error:n}=w({fields:y},{initialData:e}),{getWidgets:a}=S();if(i)throw n;return s.jsxs(d,{widgets:{after:a("location.list.after"),before:a("location.list.before"),sideAfter:a("location.list.side.after"),sideBefore:a("location.list.side.before")},showJSON:!0,children:[s.jsxs(d.Main,{children:[s.jsx(Y,{}),s.jsx("div",{className:"flex flex-col gap-3 lg:col-span-2",children:t.map(c=>s.jsx(M,{location:c},c.id))})]}),s.jsx(d.Sidebar,{children:s.jsx(J,{})})]})}var J=()=>{const{t:e}=o();return s.jsxs(f,{className:"p-0",children:[s.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:s.jsx(g,{level:"h2",children:e("stockLocations.sidebar.header")})}),s.jsx(u,{to:"/settings/locations/shipping-profiles",labelKey:e("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:e("stockLocations.sidebar.shippingProfiles.description"),icon:s.jsx(k,{})}),s.jsx(u,{to:"/settings/locations/shipping-option-types",labelKey:e("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:e("stockLocations.sidebar.shippingOptionTypes.description"),icon:s.jsx(A,{})})]})};export{ts as Component,es as loader};
